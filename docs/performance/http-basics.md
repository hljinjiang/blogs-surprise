# Http Basics
## HTTP
:::info 简介
**超⽂本传输协议**(HyperText Transfer Protocol)  
每个 HTTP请求都是⽆状态的，可以把 HTTP的⼀次请求当作⼀次事务  
HTTP是应⽤层通信协议，旨在在联⽹设备之间传输信息，HTTP标准化了客户端和服务器之间的通信⽅式  
HTTPS：在 HTTP基础上，增加 **传输加密** 和 **身份认证** 保证传输过程的安全性
:::
:::info HTTP结构
![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.001.png)

![](./assets/WX20230104-095243@2x.png)
:::

## HTTP报文
:::info 简介
报文：是网络中交换与传输的数据单元，即站点一次性要发送的数据块  
HTTP传输分为 **报文首部** 和 **报文主体**
:::
### HTTP报文⾸部
:::info 简介
- **请求行**
  - HTTP 请求 Method、URI、Version ( GET /URI HTTP/1.1 )
- **状态行**
  - HTTP 响应 Version、Status Code、Reason ( HTTP/1.1 200  OK )
- **首部字段**
  - 包含表示请求和响应的各种条件和属性的各类首部
  - **通⽤⾸部字段**：请求报⽂和响应报⽂两⽅都会使⽤的头部  
    |  首部字段名   | 说明  |
    |  ----  | ----  |
    | Cache-Control	| **控制缓存的行为**
    | Connection | **连接管理**
    | Date | **创建报文的日期时间**
    | Pragma | **报文指令**
    | Trailer | **报文末端的首部一览**
    | Trailer-Encoding | **指定报文主体的传输编码方式**
    | Upgrade | **升级为其他协议**
    | Via | **代理服务器的相关信息**
    | Warning | **错误通知**
  - **请求⾸部字段**：从客户端向服务器端发送请求报⽂使⽤的头部  
    |  首部字段名   | 说明  |
    |  ----  | ----  |
    | Accept | **用户代理可处理的媒体类型**
    | Accept-Charset | **优先处理字符集**
    | Accept-Encoding | **优先的内容编码**
    | Accept-Language | **优先的语言**
    | Authorization | **Web认证信息**
    | Expect | **期待服务器的特定行为**
    | From | **用户的电子邮箱地址**
    | Host | **请求资源所在的服务器**
    | If-Match | **比较实体标记**
    | If-Modified-Since | **比较资源的更新时间**
    | If-None-Match | **比较实体标记（与If-Match相反）**
    | Max-Forwards | **最大传输逐跳数**
    | Proxy-Authorization | **代理服务器要求客户端的认证信息**
    | Range | **实体的字节范围请求**
    | Referer | **对请求中URI的原始获取方**
    | TE | **传输编码的优先级**
    | User-Agent | **HTTP客户端程序的信息**
  - **响应⾸部字段**：从服务端向客户端返回响应报⽂时使⽤的头部  
    |  首部字段名   | 说明  |
    |  ----  | ----  |
    | Accept-Ranges | **是否接受字节范围请求**
    | Age | **推算资源创建经过时间**
    | ETag | **资源的匹配信息**
    | Location | **令客户端重定向至URI**
    | Proxy-Authenticate | **代理服务器对客户端的认证信息**
    | Retry-After | **对再次发器请求的时机要求**
    | Server | **HTTP服务器的安装信息**
    | Vary | **代理服务器缓存的管理信息**
    | WWW-Authenticate | **服务器对客户端的认证信息**
  - **实体⾸部字段**：针对请求报⽂和响应报⽂的实体部分使⽤的⾸部（如补充资源内容更新时间等与实体有关的信息）
    |  首部字段名   | 说明  |
    |  ----  | ----  |
    | Allow | **资源可支持的HTTP方法**
    | Content-Encoding | **实体主体适用的编码方式**
    | Content-Language | **实体主体的自然语言**
    | Content-Length | **实体主体的大小（单位：字节）**
    | Content-Location | **替代对应资源的URI**
    | Content-MD5 | **实体主体的报文摘要**
    | Content-Range | **实体主体的位置范围**
    | Content-Type | **实体主体的媒体类型**
    | Expires | **实体主体过期的日期时间**
    | Last-Modified | **资源的最后修改日期时间**
:::

## HTTP状态码
:::info 简介
状态码的职责是当客户端向服务器端发送请求时，描述返回的请求结果
:::
|  首部字段名   | 说明  |
|  ----  | ----  |
| 1xx(信息状态码) | 接收的请求正在处理
| 2xx(成功状态码) | 请求正常处理完毕
| 200 | 正常处理，请求成功
| 204 | 请求处理成功，但是没有响应主体
| 206 | Content-Range 指定范围的实体内容
| 3xx(重定向状态码) | 需要进行附加操作以完成请求
| 301 | 永久重定向 (表示请求的资源已被分配了新的URI，以后应使用资源现在所指的URI，会去更新书签的URI)
| 302 | 临时重定向 (表示请求的资源已被分配了新的URI，希望用户（本次）能使用新的URI访问，保留书签对应的URI)
| 303 | 临时重定向 (表示请求的资源已被分配了新的URI，希望用户（本次）能使用新的URI访问，保留书签对应的URI，但应当使用GET请求)
| 304 | 资源已找到，但未符合条件请求 (比如该请求返回的文件，文件未被修改，对客户端有缓存情况下服务端的一种响应)
| 4xx(客户端错误状态码) | 服务器⽆法处理请求
| 400 | 请求语法错误
| 401 | 请求需要账户密码认证
| 403 | 请求资源的访问被服务器拒绝
| 404 | 服务器没有找到请求资源
| 5xx(服务端错误状态码) | 服务器处理请求出错
| 500 | 服务器发⽣错误
| 503 | 服务器暂时处于超负载或处于停机维护



a. 获取服务器资源， Web建⽴在 http协议上通信

3. 服务端（ server）

a. 接收请求，响应请求

4. URI（ **统⼀资源标识符** ）
1. URI协议指访问资源所使⽤的的协议类型名称，能 **唯⼀标识某⼀互联⽹资源**
1. <https://blog.csdn.net/qq_32595453/article/details/79516787>
1. 我们可以这样解释它：
1. ①这是⼀个可以通过 https协议访问的资源，
1. ②位于主机 blog.csdn.net上，
3. ③通过 “/qq\_32595453/article/details/79516787”可以对该资源进⾏唯⼀标识（注意，这个不⼀定是完 整的路径）

注意：以上三点只不过是对实例的解释，以上三点并不是URI的必要条件，URI只是⼀种概念，怎样实 现⽆所谓，只要它唯⼀标识⼀个资源就可以了。

![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.006.png)

5. URL（ **统⼀资源定位符** ）

a. URI**能唯⼀标识某⼀互联⽹资源** ， URL**在此基础上表示资源的位置** ， URL是 URI的⼦集

6. DNS（ **应⽤层** -**将域名和** ip**相互映射，计算机互相访问** ）
1. DNS协议解析，通过域名查找 IP地址
1. DNS是⼀个分布式数据库，如果所访问的 DNS服务器不存在计算机请求的域名，则会重定向到另⼀台 DNS服 务器

![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.007.jpeg)

7. HOST
1. 例如：访问百度 **www.baidu.com --> 119.75.217.109**
1. 相当于是我们本地的⼀个DNS服务
1. 输⼊域名时，计算机会先到**host**⽂件夹⾥⾯查找有没有这个域名。
1. 如果存在，则直接访问这个该域名对应的IP，加快了域名解析；
1. 如果没有，再去DNS服务器查找IP

1 0.0.0.0  #屏蔽的⽹站![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.008.png)

8. TCP/IP协议
1. TCP协议（ **传输层** -**传输控制协议** -**应⽤程序之间通讯** ）
1. **从应⽤层处收到的数据（** HTTP**请求报⽂）进⾏分割，并在各个报⽂上打上标记序号及端⼝号后转发给⽹ 络层**
1. 作⽤：
   1. 将⼤块数据分割成报⽂段为单位的数据包，确保数据能到达⽬标
1. 字节流服务
1. 将⼤块数据分割成报⽂段为单位的数据包进⾏管理
1. 能够将数据准确可靠地传输给对⽅

![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.009.png)

2. IP协议（ **⽹络层** -**⽹络协议** -**计算机之间的通信** ）
1. **增加作为通信⽬的地的** MAC**地址后转发给链路层**
1. 作⽤：
   1. 把各种数据包传送给对⽅
1. 需要满⾜ IP**地址** 和 MAC**地址**

\1. 通过解析 IP地址，得知 MAC地址，进⾏路由选择传输数据

![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.010.jpeg)

![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.011.jpeg)



2.  服务器
3. 1台服务器可以有多台虚拟主机，每个主机可以设置⼀个域名

![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.012.jpeg)

2. **代理**
1. 转发功能的应⽤程序
1. 接收代理客户端的请求，（可以修改后）并转发给服务器

i. 也可以接收服务器返回的响应，（可以修改后）转发给客户端

1. **⽹关**
1. 转发其他服务器通信数据的服务器
1. 接收从客户端（ client）发送来的请求时
1. 它可以像⾃⼰拥有资源服务器⼀样对请求进⾏处理
2. **隧道**

i. 在客户端和服务器之间进⾏中转，并保持双⽅通信连接的应⽤程序

11. HTTP缺点
1. 通信使⽤明⽂（不加密），内容可能被窃听
1. 不验证通信⽅的身份，身份可能遭遇伪装
1. ⽆法证明明⽂的完整性，明⽂可能会被篡改
12. HTTPS
1. 通过 SSL协议 + 加密 + 认证 + 明⽂完整性保护
1. ⽹站通信进⾏加密
13. Web安全漏洞
1. XSS（跨站脚本攻击）
1. 通过虚假输⼊表单骗取⽤户个⼈信息
1. 显示伪造的⽂章或图⽚
1. **通过表单输⼊，动态⽣成** script**等造成漏洞危险**

![](./assets/Aspose.Words.417e3b11-1720-4c92-af80-ff130734d73b.013.png)

2. SQL注⼊攻击
1. ⾮法查看或篡改数据库数据
1. 规避认证
1. 通过表单输⼊，查询或提交时，使⽤处理过的字符串请求接⼝
1. 当服务器调⽤ SQL语句时，特殊的字符串就会注⼊到 SQL语句中，造成意想不到的结果


**TCP：互联⽹协议(传输控制协议)，是TCP/IP中的⽹络层协议核⼼**
1. 传输层（**报⽂段**也可称为**数据包**）
1. TCP把数据流分割成适当⻓度的报⽂段
1. 之后TCP把数据包传给IP层
1. 由IP层来通过路由⽹络将包传送给接收端实体的TCP层
1. TCP层会将接收到所有的报⽂段进⾏组装，如果有部分报⽂段丢失则会让其重新发送，直⾄成功组装完整数 据，才会进⼊**应⽤层**
1. TCP的作⽤控制传输数据的完整性
2. TCP三次握⼿和四次挥⼿全过程
1. SYN：同步标志。该标志仅在三次握⼿建⽴TCP连接时有效。
1. ACK：确认标志。同时提示远端系统已经成功接收所有数据。
1. PSH: 表示有DATA数据传输。
1. FIN: 结束标志。
1. RST: reset表示连接重置。
1. URG: urgent紧急指针字段值有效。
1. SEQ：随机序列号
3. 三次握⼿
1. 连接开始：客户端发送SYN（SEQ=a）报⽂给服务器端，进⼊SYN\_SEND状态。
1. 请求确认：服务器端收到SYN报⽂，回复⼀个SYN （SEQ=b）和ACK（ACK=a+1）报⽂，x包为客户端发来 的SYN进⼊S[YN_RECV状态。](https://baike.baidu.com/item/SYN_RECV)
1. 连接确认：客户端检查ACK === a+1，随之发送ACK（ACK=b+1）报⽂给服务端，服务端检查ACK === b+1，如果正确则建⽴连接，进⼊Established状态。client和server之间开始传输数据。

![](./assets/Aspose.Words.3443b485-1533-46e9-8ef5-fddf78953ed1.001.png)

4. 四次挥⼿
1. Client发送⼀个FIN并包含⼀个随机的seq=a，主动关闭Client到Server的数据传送，Client进⼊FIN\_WAIT\_1状

态

2. Server收到FIN后，发送⼀个ACK并包含⼀个seq=a+1给Client,Server进⼊CLOSE\_WAIT状态。
2. Server发送⼀个FIN并包含⼀个随机的seq=b和⼀个ACK=a+1,⽤来关闭Server到Client的数据传输，Server进 ⼊LAST\_ACK状态。
2. Client收到FIN后，Client进⼊TIME\_WAIT状态，接着发送⼀个ACK并包含⼀个seq=b+1给Server,Servr收到 ACK包后进⼊CLOSED状态，完成四次挥⼿

![](./assets/Aspose.Words.3443b485-1533-46e9-8ef5-fddf78953ed1.002.png)

**IP：互联⽹协议(⽹络之间互连协议)，是TCP/IP中的⽹络层协议核⼼**

1. IP信息包传送
   1. IP⽹络之间信息数据传送的协议
1. IP地址
   1. 每台⽹络设备都是独⼀⽆⼆的IP地址
   1. 每个IP信息包都包含**⽬的设备**的IP地址
   1. ⽤于⽹络之间通信到对应的IP地址
1. IP路由
1. IP地址与IP路由是IP信息包传送的基础
1. IP信息包必须通过IP路由的机制，在⼀个个路由器之间传递

![](./assets/Aspose.Words.3443b485-1533-46e9-8ef5-fddf78953ed1.003.png)

4. 传送⽅式
   1. 单点传送：单点传送是⼀对⼀的传递模式。
   1. ⼴播传送：⼴播传送是⼀对多的传递⽅式，必定会传送⾄某⼀个⽹络内的所有设备。
   1. 多点传送：多点传送是⼀对⼀的传递模式，传送给⼀群指定的设备。
4. 协议版本
1. IPV4：2019年IPV4地址分配完毕，地址个数4,294,967,296
1. IPV6
6. IP地址类型
1. 公有地址，可以直接访问internet
1. 私有地址

i. 私有地址（Private address）属于⾮注册地址，专⻔为组织机构内部使⽤。

1. A类 10.0.0.0--10.255.255.255
1. B类 172.16.0.0--172.31.255.255
1. C类 192.168.0.0--192.168.255.255
